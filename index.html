<!DOCTYPE html><html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1.0,  user-scalable=0" name="viewport"><title>KIT</title><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/index.min.css"></head><body><nav class="nav-button-list"><div class="btn menu show-canvas"><span class="icon-bar"></span></div><div class="btn top btn-go-top"><i class="ion-arrow-up-c"></i><span class="scroll-percentage">0%</span></div></nav><div class="container-fluid page-header"><div class="header"><p class="first">hi Babe</p><p class="second">look at this kingdom. i conquered for thee.</p><span class="third">kit's note</span></div><div class="background"></div></div><div class="main-wrap"><div class="container"><div class="row"><div class="col-lg-3 side-bar-left"><div class="sidebar-content"><div class="main-side-bar"><div class="header"><p>爱好上班，特长加班</p><p>求职中</p><p>catslove28@163.com</p></div><nav class="side-bar-nav"><a href="/" class="item"><span>首页</span></a><a href="/archives" class="item m"><span>归档</span></a><a href="/tags" class="item last unopen"><span>标签</span></a></nav></div><div class="card user-card"><div class="user-image"><img src="/img/head.jpeg" class="img-fluid"></div><div class="user-info"><div class="user-name">kitwang chan</div><div class="user-other">frontend/UI designer</div></div><div class="overview"><span><i>11</i><br/> 日志</span><span class="m"><i>6</i><br/> 分类</span><span><i>8</i><br/> 标签</span></div></div></div></div><div class="col-lg-9 main-content"><div class="post-wrap content-wrap index-post-wrap"><article class="post post-list"><header class="header"><a href="/2017/06/27/深入学习javascript-this/">深入学习javascript - this</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年6月27日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/javascript/">javascript</a></span></div></section><section class="excerpt"><h1 id="关于this"><a href="#关于this" class="headerlink" title="关于this"></a>关于this</h1><p><code>this</code>应该是javascript中一个比较复杂的机制了，在日常工作中我们可能有意无意都会使用到这个机制，但是<code>this</code>的工作机制真正了解的可能只有皮毛，通过学习这一机制，能够提高对js代码的理解和阅读能力，还有对js程序设计模式有着更深的理解。</p>
<h1 id="this的指向"><a href="#this的指向" class="headerlink" title="this的指向"></a>this的指向</h1><p>this是运行时进行绑定的，而不是编写时绑定的，它的上下文取决于函数调用时的各种条件。this的绑定和函数声明的位置没有任何关系，只取决于函数的调用方式。</p>
<p>通过分析调用位置，就能知道this到底引用的是什么。所以，寻找调用位置就能弄清上面的问题，通过一个例子，就能很好地理解这个问题：</p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">function baz() {
  // 当前调用栈是 baz
  // 当前调用位置是全局作用域

  console.log(&#39;baz&#39;);
  bar(); // bar的调用位置
}

function bar() {
  // 当前的调用栈是 baz -&gt; bar
  // 当前的调用位置是baz

  console.log(&#39;bar&#39;);
  foo();
}

function foo() {
  // 当前的调用栈是 baz -&gt; bar -&gt; foo
  // 当前的调用位置是bar

  console.log(&#39;foo&#39;);
}

baz();
</code></pre></section><a href="/2017/06/27/深入学习javascript-this/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/06/24/webpack2新特性&amp;迁移/">webpack2新特性&迁移</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年6月24日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/前端工具/">前端工具</a></span></div></section><section class="excerpt"><p>webpack2已经发布了好一段时间了。但是因为之前工作的关系没有好好研究一下，后面工作应该会用得上，而且趁着这段时间有空，还有在熟悉vim，就顺便拿这来练练手了。</p>
<h1 id="从webpack1中迁移"><a href="#从webpack1中迁移" class="headerlink" title="从webpack1中迁移"></a>从webpack1中迁移</h1><p>官方已经给出了详细的<a href="https://webpack.js.org/guides/migrating/" target="_blank" rel="external">迁移指南</a>，改动并不是很大，但是优化却蛮多的，如编译速度，代码优化等。如果你的项目正在用webpack，那么这个新版本还是挺值得迁移的。</p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>如果升级webpack之后直接运行命令的话应该会看到一片红的，可以看出配置项有改动，下面整理一下经常使用地方的改动。</p>
<h3 id="module-loaders变成module-rules"><a href="#module-loaders变成module-rules" class="headerlink" title="module.loaders变成module.rules"></a><code>module.loaders</code>变成<code>module.rules</code></h3><p>旧的<code>module.loader</code>被<code>module.rules</code>取代，后者允许配置<code>loader</code>更多选项，具体查看文档<a href="https://webpack.js.org/configuration/module/#module-rules" target="_blank" rel="external">module.rules</a></p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">// ...
mdoule: {
    rules: [
        {
            test: /\.css$/,
            use: [
                { loader: &#39;style-loader&#39; },
                {
                    loader: &#39;css-loader&#39;,
                    options: { module: true }
                }
            ]
        },
        {
            test: /\.jsx$/,
            loader: &#39;babel-loader&#39;,
            options: {
                // ...
            }
        }
    ]
}
// ...
</code></pre></section><a href="/2017/06/24/webpack2新特性&amp;迁移/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/06/14/深入学习javascript-闭包/">深入学习javascript-闭包</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年6月14日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/javascript/">javascript</a></span></div></section><section class="excerpt"><h1 id="什么是闭包"><a href="#什么是闭包" class="headerlink" title="什么是闭包"></a>什么是闭包</h1><p>记得刚开始用js的时候就听过闭包这个概念，一开始觉得只是一个语言特性，没有太深入了解，网上查资料的解释一般是：函数有权访问另一个函数作用域中变量的函数，最容易生成闭包的方式一般是函数里面套函数。</p>
<blockquote>
<p>当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是在当前词法作用域外执行。<br>— 你不知道的javascript（上卷）</p>
</blockquote>
<p>然后看个例子</p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">function foo() {
    var a = 2;

    funtion bar() {
        console.log(a);
    }

    bar();
}

foo();
</code></pre>
<p>如果按上面第一条的定义，这里一定是生成了闭包，但是<strong>确切的说并不是</strong>，这里最准确的说是<code>bar</code>对<code>a</code>的引用方式是词法作用域的查找规则，而这些只是<strong>闭包</strong>的一部分。然后再看清晰闭包的例子</p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">fucntion foo() {
    var a = 2;

    function bar() {
        console.log(a)
    }

    return bar;
}

var baz = foo()；

baz(); // 这就是闭包效果
</code></pre></section><a href="/2017/06/14/深入学习javascript-闭包/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/06/11/用python写一个简单爬虫/">用python写一个简单爬虫</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年6月11日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/python/">python</a></span></div></section><section class="excerpt"><p>之前一直有学习python，但是一直都是在学一些比较基础的东西，所在在这段空闲的时间打算系统学一下python。在这会使用python写一个爬百科的简单爬虫，首先分析下爬虫的需求。</p>
<h1 id="主要需求"><a href="#主要需求" class="headerlink" title="主要需求"></a>主要需求</h1><p>这个demo中爬虫有3个主要模块，<strong>URL管理器</strong>、<strong>下载器</strong>、<strong>解析器</strong></p>
<ul>
<li>URL管理器主要处理爬取的URL的状态。</li>
<li>下载器会通过<strong>URL管理器</strong>传送过来有效URL进行下载。</li>
<li>解析器会将<strong>下载器</strong>下载的内容解析成字符串，再进行保存。如果解析出有效URL再传给<strong>URL管理器</strong>进行重复操作。</li>
</ul>
<h2 id="入口程序"><a href="#入口程序" class="headerlink" title="入口程序"></a>入口程序</h2><p><code>spider_main</code>文件为程序入口，处理整个爬虫的运行逻辑</p></section><a href="/2017/06/11/用python写一个简单爬虫/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/05/31/深入学习javascript-作用域/">深入学习javascript--作用域</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年5月31日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/javascript/">javascript</a></span></div></section><section class="excerpt"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用js已经有一段时间了，一开始觉得js只是一门玩具语言，用来做做前端交互效果。但是随着越来越深入，慢慢发现js的其他优点：灵活的自由的代码编写带来多种多样的设计方式，令人慢慢着迷。但是很多时候都感觉只是停留在如何使用js实现相关的功能，偶尔遇到一些特殊的情况或者需要深度优化的点，就会感到惘然，为了打破这尴尬情况，打算开始读相关的一些书籍来分析js更深层的设计还有使用方式，从而“达到知其然且知其所以然”。</p>
<h1 id="作用域是什么"><a href="#作用域是什么" class="headerlink" title="作用域是什么"></a>作用域是什么</h1><p>JS中每个函数都有自己的执行环境，在执行环境中能够储存变量中的值，并且能在之后对值进行访问或者修改。换句话说，规定变量储存在哪里，程序要如何找到这些变量，这套规则就称为<strong>作用域</strong>。</p>
<h2 id="理解作用域执行过程"><a href="#理解作用域执行过程" class="headerlink" title="理解作用域执行过程"></a>理解作用域执行过程</h2><p>如在<code>var a = 2</code>执行过程中，分别有引擎、编译器、作用域三个参与了这次过程。</p>
<p>首先，编译器会将这段程序分解成词法单元，然后将词法单元解析成一个树结构。</p>
<ol>
<li>遇到var a，编译器会在<strong>作用域</strong>中查找是有已经存在有该名称的变量。如果是，编译器会忽略这一声明，继续编译；否则，会要求作用域在当前作用域集合中声明一个新变量，并命名为a。</li>
<li>接下来，编译器会为<strong>引擎</strong>生成运行时所需的代码，代码用来处理<code>a = 2</code>这个赋值操作。引擎运行时会首先询问<strong>作用域</strong>当前作用集合是否有一个<code>a</code>的变量。如果是，<strong>引擎</strong>就会使用这个变量；如果不是，引擎会继续查找该变量。如果<strong>引擎</strong>找到<code>a</code>变量，就会赋值2。否则，<strong>引擎</strong>会抛出一个异常。</li>
</ol>
<p><strong>总结</strong>：变量赋值分别有两个动作，<strong>编译器</strong>会在当前<strong>作用域</strong>中声明一个变量（如果之前没有声明过），然后在运行时引擎会在<strong>作用域</strong>中查找该变量，如果能找到就对变量进行赋值。</p></section><a href="/2017/05/31/深入学习javascript-作用域/" class="readmore">read more</a></article><nav class="pagination index-pagination"><a href="/" class="item active">1</a><a href="/page/2/" class="item">2</a><a href="/page/3/" class="item">3</a><a href="/page/2/" class="item"><i class="ion-ios-arrow-right"></i></a></nav></div></div></div></div><div class="container-fluid copyright"><div> <span>©   2015 - 2016</span><i class="icon ion-ios-nutrition"></i><span>Kit</span></div><div><span>power by </span><span><a href="//hexo.io">hexo.</a></span><span>Design By Kit.</span></div></div></div><script src="/js/vendor.min.js"></script><script src="/js/index.min.js"></script></body></html>