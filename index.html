<!DOCTYPE html><html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1.0,  user-scalable=0" name="viewport"><title>KIT</title><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/index.min.css"></head><body><nav class="nav-button-list"><div class="btn menu show-canvas"><span class="icon-bar"></span></div><div class="btn top btn-go-top"><i class="ion-arrow-up-c"></i><span class="scroll-percentage">0%</span></div></nav><div class="container-fluid page-header"><div class="header"><p class="first">hi Babe</p><p class="second">look at this kingdom. i conquered for thee.</p><span class="third">kit's note</span></div><div class="background"></div></div><div class="main-wrap"><div class="container"><div class="row"><div class="col-lg-3 side-bar-left"><div class="sidebar-content"><div class="main-side-bar"><div class="header"><p>这里好像会有个搜索</p></div><nav class="side-bar-nav"><a href="/" class="item"><span>首页</span></a><a href="/archives" class="item m"><span>归档</span></a><a href="/tags" class="item last unopen"><span>标签</span></a></nav></div><div class="card user-card"><div class="user-image"><img src="/img/head.jpeg" class="img-fluid"></div><div class="user-info"><div class="user-name">kitwang chan</div><div class="user-other">frontend/UI designer</div></div><div class="overview"><span><i>14</i><br/> 日志</span><span class="m"><i>6</i><br/> 分类</span><span><i>13</i><br/> 标签</span></div></div></div></div><div class="col-lg-9 main-content"><div class="post-wrap content-wrap index-post-wrap"><article class="post post-list"><header class="header"><a href="/2017/09/13/构建60fps-web-app/">构建60fps-web-app</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年9月13日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/前端/">前端</a></span></div></section><section class="excerpt"><blockquote>
<p>这篇文章大概5500字体左右，可能需要浪费5-10分钟去阅读。</p>
</blockquote>
<hr>
<blockquote>
<p>现在javascript性能已经足够快了，但是很多时候我们的web app还是会出现卡顿的情况。这时候我们首先会想到是去优化我们的js代码，比如将for循环改为while，但其实这些微粒度的优化其实对性能提示是皮毛。看完google的<a href="https://developers.google.com/web/fundamentals/performance/rendering/" target="_blank" rel="external">render performance</a>对前端渲染优化有了一个新的认识。</p>
</blockquote>
<h1 id="几个重要概念"><a href="#几个重要概念" class="headerlink" title="几个重要概念"></a>几个重要概念</h1><h2 id="60fps与设备刷新率"><a href="#60fps与设备刷新率" class="headerlink" title="60fps与设备刷新率"></a>60fps与设备刷新率</h2><p>目前大多数设备的刷新率都是60fps。玩游戏的都知道，如果当前刷新率在30-60fps，游戏运行会基本流畅，而少于60fps就会出现卡顿的状况了。web app基本也是如此，如果浏览器渲染帧突然下降，或者帧数低的情况，就出现程序运行卡的情况了。</p>
<p>其中每个帧的预算时间仅比 16 毫秒多一点 (1 秒/ 60 = 16.66 毫秒)。但实际上，浏览器有整理工作要做，因此您的所有工作需要在 10 毫秒内完成。如果无法符合此预算，帧率将下降，并且内容会在屏幕上抖动。 此现象通常称为卡顿，会对用户体验产生负面影响。</p></section><a href="/2017/09/13/构建60fps-web-app/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/08/18/在vue项目中使用jest进行单元测试/">在vue项目中使用jest进行单元测试</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年8月18日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/前端工具/">前端工具</a></span></div></section><section class="excerpt"><p>在之前已经写过一篇关于前端单元测试的文章，相关概念就不作阐述了，有兴趣或者有需求的同学可以在往期找一下。然后这里简单介绍一下<a href="http://facebook.github.io/jest/" target="_blank" rel="external">jest</a>，这是一个<a href="https://code.facebook.com/projects/" target="_blank" rel="external">Facebook OpenSource</a>的一个开源项目。项目已经集成好了一些测试相关的框架的代码，主打的是零配置测试平台（react中应该算是零配置，其他项目还是要手动配置一下的），里面一个比较好地方是支持<strong>快照测试</strong>(为dom结构生成一个快照，每次测试都对比dom结构)。其他一些好用的地方可以自己查看文档，有中文。</p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>首先是安装jest, jset-vue-preprocessor(jest的一个插件，用来解析’.vue’文件的)。</p>
<p></p><p class="code-caption" data-lang="shell" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="shell">$npm install jest jest-vue-preprocessor --save-dev

$yarn add jest jest-vue-preprocessor --save
</code></pre>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>下面的配置都在<strong>package.json</strong>文件中配置。</p>
<p>在文件最底部添加下面代码</p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">{
  // ...
  &quot;jest&quot;: {
    // 配置文件拓展名
    &quot;moduleFileExtensions&quot;: [
      &quot;js&quot;,
      &quot;vue&quot;
    ],
    // 匹配webpack中配置的alias
    &quot;moduleNameMapper&quot;: {
      &quot;^vue$&quot;: &quot;vue/dist/vue.common.js&quot;,
      &quot;^@(.*)$&quot;: &quot;&lt;rootDir&gt;/src$1&quot;
    },
    // 编译工具
    &quot;transform&quot;: {
      &quot;.*\\.(vue)$&quot;: &quot;&lt;rootDir&gt;/node_modules/jest-vue-preprocessor&quot;,
      &quot;.*&quot;: &quot;babel-jest&quot;
    }
  }
}
</code></pre></section><a href="/2017/08/18/在vue项目中使用jest进行单元测试/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/07/20/深入学习javascript-类/">深入学习javascript-类</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年7月20日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 </span></div></section><section class="excerpt"><h1 id="类理论"><a href="#类理论" class="headerlink" title="类理论"></a>类理论</h1><p>类／继承描述了一种代码的组织结构形式，这个理论在软件设计中一直作为一个主导的角色。通过学习类理论，能为更好地学习js中的设计模式和对js中原型链的理解打下基础。</p>
<p>类是在软件中对真实世界问题领域的建模方法。如一个经常看见的交通例子。<strong>汽车</strong>可以被看作<strong>交通工具中的一种</strong>，所以在软件开发时可以定义一个<code>Vehicle</code>类，<code>Vehicle</code>中包含推进器（引擎）、载人能力等方法。定义<code>Car</code>时，只要声明它继承或者拓展<code>Vehicle</code>这个基础定义就行了，其他交通工具如船、飞机也可以继承<code>Vehicle</code>。<strong>这就是类的实例化与继承</strong>。</p>
<p>类的另外一个核心概念是<strong>多态</strong>，这个概念是说夫类的通用行为可以被子类更特殊的行为重写。</p>
<p>javascript中也有类中的<code>new</code>和<code>instanceof</code>，还有ES6中的<code>class</code>关键字，但这些并不是说明js中有<strong>类</strong>的。javascript中只是为了满足类的设计需求而提供一些类似的语法。</p>
<h2 id="js中实现类复制-混入"><a href="#js中实现类复制-混入" class="headerlink" title="js中实现类复制(混入)"></a>js中实现类复制(混入)</h2><p>javascript中的对象机制并不会自动执行复制行为，简单来说javascript中只有对象，并不存在可以实例的类。一个对象并不会复制一个对象，只会把它关联起来(prototype)。</p></section><a href="/2017/07/20/深入学习javascript-类/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/06/27/深入学习javascript-this/">深入学习javascript - this</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年6月27日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/javascript/">javascript</a></span></div></section><section class="excerpt"><h1 id="关于this"><a href="#关于this" class="headerlink" title="关于this"></a>关于this</h1><p><code>this</code>应该是javascript中一个比较复杂的机制了，在日常工作中我们可能有意无意都会使用到这个机制，但是<code>this</code>的工作机制真正了解的可能只有皮毛，通过学习这一机制，能够提高对js代码的理解和阅读能力，还有对js程序设计模式有着更深的理解。</p>
<h1 id="this的指向"><a href="#this的指向" class="headerlink" title="this的指向"></a>this的指向</h1><p>this是运行时进行绑定的，而不是编写时绑定的，它的上下文取决于函数调用时的各种条件。this的绑定和函数声明的位置没有任何关系，只取决于函数的调用方式。</p>
<p>通过分析调用位置，就能知道this到底引用的是什么。所以，寻找调用位置就能弄清上面的问题，通过一个例子，就能很好地理解这个问题：</p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">function baz() {
  // 当前调用栈是 baz
  // 当前调用位置是全局作用域

  console.log(&#39;baz&#39;);
  bar(); // bar的调用位置
}

function bar() {
  // 当前的调用栈是 baz -&gt; bar
  // 当前的调用位置是baz

  console.log(&#39;bar&#39;);
  foo();
}

function foo() {
  // 当前的调用栈是 baz -&gt; bar -&gt; foo
  // 当前的调用位置是bar

  console.log(&#39;foo&#39;);
}

baz();
</code></pre></section><a href="/2017/06/27/深入学习javascript-this/" class="readmore">read more</a></article><article class="post post-list"><header class="header"><a href="/2017/06/24/webpack2新特性&amp;迁移/">webpack2新特性&迁移</a></header><section class="info"><div class="item"><i class="ion-android-calendar"></i><span>发表于 2017年6月24日</span></div><div class="item"><i class="ion-android-folder-open"></i><span>分类于 <a href="/categories/前端工具/">前端工具</a></span></div></section><section class="excerpt"><p>webpack2已经发布了好一段时间了。但是因为之前工作的关系没有好好研究一下，后面工作应该会用得上，而且趁着这段时间有空，还有在熟悉vim，就顺便拿这来练练手了。</p>
<h1 id="从webpack1中迁移"><a href="#从webpack1中迁移" class="headerlink" title="从webpack1中迁移"></a>从webpack1中迁移</h1><p>官方已经给出了详细的<a href="https://webpack.js.org/guides/migrating/" target="_blank" rel="external">迁移指南</a>，改动并不是很大，但是优化却蛮多的，如编译速度，代码优化等。如果你的项目正在用webpack，那么这个新版本还是挺值得迁移的。</p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>如果升级webpack之后直接运行命令的话应该会看到一片红的，可以看出配置项有改动，下面整理一下经常使用地方的改动。</p>
<h3 id="module-loaders变成module-rules"><a href="#module-loaders变成module-rules" class="headerlink" title="module.loaders变成module.rules"></a><code>module.loaders</code>变成<code>module.rules</code></h3><p>旧的<code>module.loader</code>被<code>module.rules</code>取代，后者允许配置<code>loader</code>更多选项，具体查看文档<a href="https://webpack.js.org/configuration/module/#module-rules" target="_blank" rel="external">module.rules</a></p>
<p></p><p class="code-caption" data-lang="javascript" data-line_number="backend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><p></p>
<pre><code class="javascript">// ...
mdoule: {
    rules: [
        {
            test: /\.css$/,
            use: [
                { loader: &#39;style-loader&#39; },
                {
                    loader: &#39;css-loader&#39;,
                    options: { module: true }
                }
            ]
        },
        {
            test: /\.jsx$/,
            loader: &#39;babel-loader&#39;,
            options: {
                // ...
            }
        }
    ]
}
// ...
</code></pre></section><a href="/2017/06/24/webpack2新特性&amp;迁移/" class="readmore">read more</a></article><nav class="pagination index-pagination"><a href="/" class="item active">1</a><a href="/page/2" class="item">2</a><a href="/page/3" class="item">3</a><a href="/page/2/" class="item"><i class="ion-ios-arrow-right"></i></a></nav></div></div></div></div><div class="container-fluid copyright"><div> <span>©   2015 - 2016</span><i class="icon ion-ios-nutrition"></i><span>Kit</span></div><div><span>power by </span><span><a href="//hexo.io">hexo.</a></span><span>Design By Kit.</span></div></div></div><script src="/js/vendor.min.js"></script><script src="/js/index.min.js"></script></body></html>