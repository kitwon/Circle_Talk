{"version":3,"sources":["webpack:///./src/components/post/HeadList.tsx","webpack:///./src/components/post/Pagination.tsx","webpack:///./src/templates/post.tsx"],"names":["Wrapper","styled","div","List","TitleList","onItemClick","id","pos","document","documentElement","scrollTop","scrollToPos","getElementById","offsetTop","render","listData","this","props","className","map","item","depth","key","value","role","tabIndex","onClick","onKeyDown","React","Component","Button","a","PostPagination","prev","next","href","frontmatter","path","title","escape2Html","str","arrEntities","lt","gt","nbsp","amp","quot","replace","_","t","PostDetail","componentDidMount","i","el","getElementsByTagName","j","length","setAttribute","innerHTML","dataset","offset","String","leftCover","style","width","offsetWidth","position","top","left","offsetLeft","data","location","pageContext","markdownRemark","headings","html","date","category","console","log","tableOfContents","postPath","pathname","SideNav","dangerouslySetInnerHTML","__html","Pagination","previous","Footer","TopBtn","delay","pageQuery"],"mappings":"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","file":"component---src-templates-post-tsx-566ccdc25fdc85ea11c7.js","sourcesContent":["import React, { ReactElement } from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  display: block;\n  padding: 30px 5px;\n  background: #fff;\n  border-bottom: 1px solid #e1e2e3;\n\n  .title {\n    position: relative;\n    text-align: center;\n    padding-bottom: 5px;\n    margin-bottom: 30px;\n\n    &:after {\n      content: \"\";\n      display: block;\n      position: absolute;\n      width: 30px;\n      border-bottom: 1px solid #74d6eb;\n      bottom: 0;\n      left: 50%;\n      margin-left: -15px;\n    }\n  }\n`;\n\nconst List = styled.div`\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  font-size: 14px;\n\n  span {\n    color: #6b7174;\n    cursor: pointer;\n\n    &:hover {\n      color: #1993ad;\n      text-decoration: underline;\n    }\n  }\n\n  .l1 {\n    padding-left: 0;\n  }\n\n  .l2 {\n    padding-left: 1em;\n  }\n\n  .l3 {\n    padding-left: 2em;\n  }\n\n  .l4 {\n    padding-left: 3em;\n  }\n`;\n\ninterface Props {\n  listData: any\n}\n\nfunction scrollToPos(pos: number): void {\n  document.documentElement.scrollTop = pos - 50;\n  // if (document.documentElement.scrollTop > pos) requestFrame(this.goPageTop);\n}\n\nexport default class TitleList extends React.Component<Props> {\n  // eslint-disable-next-line class-methods-use-this\n  onItemClick(id: string): void {\n    const pos = document.getElementById(id) as HTMLElement\n    scrollToPos(pos.offsetTop)\n  }\n\n\n  render(): ReactElement {\n    const { listData } = this.props;\n    return (\n      <Wrapper>\n        <div>\n          <div className=\"title\">文章目录</div>\n\n          <List>\n            {listData.map((item: any): ReactElement => (\n              <div\n                className={`l${item.depth}`}\n                key={item.value}\n                role=\"button\"\n                tabIndex={0}\n                onClick={(): void => this.onItemClick(item.value)}\n                onKeyDown={(): void => this.onItemClick(item.value)}\n              >\n                {item.value}\n              </div>\n              ))}\n          </List>\n        </div>\n      </Wrapper>\n    );\n  }\n}\n","import React, { FunctionComponentElement } from 'react'\nimport styled from 'styled-components'\n\nconst Wrapper = styled.div`\n  margin: 40px auto 0;\n  text-align: center;\n  padding: 30px 0;\n  border-top: 1px solid #ddd;\n`\n\nconst Button = styled.a`\n display: inline-block;\n  margin: 0 10px;\n  color: #fff;\n  background-color: #1ca6c4;\n  font-size: .875rem;\n  padding: .2em .75em;\n  border-radius: .3rem;\n  box-shadow: 0 5px 0 #158097;\n  transition: all .3s cubic-bezier(.55,0,.1,1);\n\n  &:hover {\n    text-decoration: none;\n    background-color: #1fb9da;\n    color: #fff;\n    outline: none;\n  }\n\n  &:active {\n    text-decoration: none;\n    background-color: #1ca6c4;\n    color: #126d81;\n    text-shadow: 0 1px hsla(0,0%,100%,.4);\n    box-shadow: 0 2px 0 #158097;\n  }\n`\n\ninterface PropTypes {\n  next: any\n  prev: any\n}\n\nconst PostPagination = ({ prev, next }: PropTypes): FunctionComponentElement<PropTypes> => {\n  return (\n    <Wrapper>\n      {prev ? (\n        <Button href={prev.frontmatter.path}>\n          <i className=\"ion-arrow-left-c\" />\n          &nbsp;\n          {prev.frontmatter.title}\n        </Button>\n      )\n      : null}\n\n      {next ? (\n        <Button href={next.frontmatter.path}>\n          {next.frontmatter.title}\n          &nbsp;\n          <i className=\"ion-arrow-right-c\" />\n        </Button>\n      )\n      : null}\n    </Wrapper>\n  )\n}\n\nexport default PostPagination\n","import '../styles'\nimport './post.scss';\n\nimport React, { ReactNode } from 'react'\nimport { graphql } from 'gatsby'\n\nimport HeadList from '../components/post/HeadList'\nimport TopBtn from '../components/TopBtn'\nimport SideNav from '../components/SideNav'\nimport Pagination from '../components/post/Pagination'\nimport Footer from '../layout/Footer'\nimport PostDefaultData from '../types/post'\n\nfunction escape2Html(str: string): string {\n  const arrEntities: any = { lt: '<', gt: '>', nbsp: ' ', amp: '&', quot: '\"' }\n  return str.replace(/&(lt|gt|nbsp|amp|quot);/gi, (_, t): string => arrEntities[t])\n}\n\nexport default class PostDetail extends React.Component<PostDefaultData> {\n  componentDidMount(): void {\n    for (let i = 1; i <= 5; i += 1) {\n      const el: any = document.getElementsByTagName(`h${i}`)\n\n      for (let j = 0; j < el.length; j += 1) {\n        el[j].setAttribute('id', escape2Html(el[j].innerHTML))\n        el[j].dataset.offset = String(el[j].offsetTop)\n      }\n    }\n\n    const leftCover = document.getElementById('leftCover') as HTMLElement\n    leftCover.style.width = `${leftCover.offsetWidth}px`\n    leftCover.style.position = 'fixed'\n    leftCover.style.top = '80px'\n    leftCover.style.left = String(leftCover.offsetLeft)\n  }\n\n  render(): ReactNode {\n    const { data, location, pageContext } = this.props\n    const { headings, html, frontmatter } = data.markdownRemark\n    const { title, date, category } = frontmatter\n    console.log(data.markdownRemark.tableOfContents)\n\n    const postPath = `https://blog.kiit.wang${location.pathname}`\n\n    return (\n      <div className=\"post-detail\">\n        <div className=\"row\">\n          <div className=\"row__left\">\n            <div id=\"leftCover\">\n              <SideNav />\n              <HeadList listData={headings} />\n            </div>\n          </div>\n\n          <div className=\"row__right\">\n            <div className=\"post-detail__header\">{title}</div>\n            <div className=\"post-detail__meta\">\n              <div className=\"post-detail__meta-item\">\n                <i className=\"ion-android-calendar\" />\n                <span>{`发表于 ${date}`}</span>\n              </div>\n              <div className=\"post-detail__meta-item\">\n                <i className=\"ion-android-folder-open\" />\n                <span>{`发表于 ${category}`}</span>\n              </div>\n            </div>\n            <div dangerouslySetInnerHTML={{ __html: html }} />\n\n            <div className=\"copyright\">\n              <li>\n                <span className=\"title\">本文作者: </span>\n                <span>Kitwang Chen</span>\n              </li>\n              <li>\n                <span className=\"title\">本文链接: </span>\n                <span>\n                  <a href={postPath}>{postPath}</a>\n                </span>\n              </li>\n              <li>\n                <span className=\"title\">版权声明: </span>\n                <span>\n                  本博客所有文章除特别声明外，均采用\n                  <a href=\"https://creativecommons.org/licenses/by-nc-sa/3.0/cn/\">\n                    CC BY-NC-SA 3.0 CN\n                  </a>\n                  许可协议。转载请注明出处！\n                </span>\n              </li>\n            </div>\n\n            <Pagination prev={pageContext.previous} next={pageContext.next} />\n          </div>\n        </div>\n        <Footer />\n        <TopBtn delay={2000} />\n      </div>\n    )\n  }\n}\n\nexport const pageQuery = graphql`\n  query ($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        date(formatString: \"MMMM DD, YYYY\")\n        path\n        title\n        category\n      }\n      headings {\n        depth\n        value\n      },\n      tableOfContents\n    }\n  }\n`\n"],"sourceRoot":""}